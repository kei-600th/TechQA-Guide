# 学習元サイト(SpecialThanks)

https://sqlab.net/

# 問題文

### 発行年別の書籍数を取得してください。また、書籍数は降順に並び替え書籍数が 2 つ以上のデータを取得してください。出力項目は release_year(発行年)と books_num(書籍数)です。

※ DB: PostgreSQL ver14.4

# SQL

```sql
SELECT release_year,  COUNT(*)AS books_num
FROM books
GROUP BY release_year
HAVING COUNT(*) >= 2
ORDER BY COUNT(*) DESC
```

# 実行前

| id  | name                            | release_year | total_page |
| --- | ------------------------------- | ------------ | ---------- |
| 1   | コードと回路                    | 2017         | 245        |
| 2   | 宇宙の歴史                      | 2019         | 314        |
| 3   | 星の記憶                        |              | 181        |
| 4   | リファクタリング                | 2004         | 315        |
| 5   | 時短レシピ 100                  | 2008         | 298        |
| 6   | 世界一周マップ                  | 2005         | 187        |
| 7   | 砂                              |              | 244        |
| 8   | ドン・スターク                  | 2006         | 272        |
| 9   | 投資のススメ                    | 2018         | 350        |
| 10  | 青毛のアン                      | 2009         | 338        |
| 11  | ロザリンのおくりもの            | 2019         | 187        |
| 12  | かもめ飛行                      | 2006         | 307        |
| 13  | 英単語 1000                     | 2010         | 185        |
| 14  | 預言者モネ                      | 2014         | 334        |
| 15  | 人生の歩み方                    | 2008         | 274        |
| 16  | 子育て日記                      | 2009         | 241        |
| 17  | ためになるお金の知識            | 2004         | 326        |
| 18  | SNS マーケティングの基本        | 2018         | 205        |
| 19  | 一軒家かマンションか            | 2005         | 323        |
| 20  | SDGs とは何か                   | 2020         | 197        |
| 21  | 覚えておきたい Excel 手法 50 選 | 2011         | 189        |
| 22  | マネジメントの教本              | 2009         | 220        |
| 23  | デザインの心得                  | 2005         | 322        |
| 24  | コンピューターサイエンス基礎    | 2021         | 216        |
| 25  | マンガで学ぶ日本史              | 2020         | 308        |
| 26  | カエルのぴょこ                  | 2016         | 54         |
| 27  | マンガで学ぶデータベース        | 2019         | 324        |
| 28  | 達人 Ruby on Rails              | 2008         | 295        |
| 29  | 噂のトンネル                    | 2010         | 325        |
| 30  | マンガで学ぶ世界史              | 2020         | 262        |

# 実行後

| release_year | books_num |
| ------------ | --------- |
| 2008         | 3         |
| 2019         | 3         |
| 2009         | 3         |
| 2005         | 3         |
| 2020         | 3         |
| 2018         | 2         |
|              | 2         |
| 2010         | 2         |
| 2004         | 2         |
| 2006         | 2         |

# 備考

- GROUP BY で出力したあとのテーブルからさらに条件を抽出して出力させる場合は HAVING を用いる
- GROUP BY で指定したあとに使えるカラムが GROUP BY で指定したカラムか COUNT(\*)になるため、だいたい HAVING で指定するのはこれらになると思われる
- 順番としては SELECT → ORDER BY の順番になるっぽいので ORDER BY books_num と記載できる
